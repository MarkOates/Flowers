properties:
  - name: screens
    type: AllegroFlare::Screens
    init_with: "{}"
  - name: framework
    type: AllegroFlare::Framework
    init_with: "screens"
  - name: display
    type: AllegroFlare::Display*
    init_with: "nullptr"
  - name: initialized
    type: bool
    init_with: false
functions:
  - name: initialize
    type: void
    body: |
      if (initialized) return;
      framework.initialize();
      display = framework.create_display(1920, 1080);
      initialized = true;
      return;
  - name: destruct
    type: void
    body: |
      if (initialized) framework.destruct();
  - name: run
    type: void
    body: |
      initialize();

      AllegroFlare::FontBin font_bin;
      font_bin.set_full_path("/Users/markoates/Repos/Flowers/bin/programs/data/fonts");

      FlowersGame::ApplicationController application_controller(&framework, &screens, &font_bin);
      AllegroFlare::FrameworkScreenRegistrar registrar(&screens, &application_controller);
      registrar.append();

      application_controller.create_gameplay_screen();
      framework.run_loop();

      registrar.remove();

      destruct();

      return;
    body_dependency_symbols:
      - std::cout
      - AllegroFlare::FrameworkScreenRegistrar
      - FlowersGame::ApplicationController
      - AllegroFlare::Display*
dependencies:
  - symbol: AllegroFlare::FrameworkScreenRegistrar
    headers: [ AllegroFlare/FrameworkScreenRegistrar.hpp ]
  - symbol: AllegroFlare::Screens
    headers: [ AllegroFlare/Screens.hpp ]
  - symbol: AllegroFlare::Framework
    headers: [ AllegroFlare/Framework.hpp ]
  - symbol: AllegroFlare::Display*
    headers: [ AllegroFlare/Display.hpp ]
  - symbol: FlowersGame::ApplicationController
    headers: [ FlowersGame/ApplicationController.hpp ]
